<div class="row-fluid">
  <div class="span12">

    <div class="page-header">
      <h1>User search for <%= @user %></h1>
    </div>

    <div class="row-fluid">
      <div class="span2">
        <form method="GET" action="" class="user-filter-form">
          <label for="user_filter" class="visuallyhidden">Filter by user</label>
          <%=
            select_tag("user_filter", options_for_select(
              User.alphabetized.map{ |u| [u.name, u.uid] }, @user_filter
            ), :class => "span2")
          %>
          <input class="btn btn-primary" type="submit" value="Filter">
        </form>
      </div>

      <div id="publication-list-container" class="span10">
        <%= paginate @page_info %>
        <table class="table table-striped table-bordered table-condensed" summary="List of your publications">
          <thead>
            <tr>
              <th scope="col" class="span1">Format</th>
              <th scope="col" class="span3">Title</th>
              <th scope="col" class="span1">State</th>
              <th scope="col" class="span3">User&rsquo;s last action</th>
              <th scope="col" class="span2">Assigned to</th>
            </tr>
          </thead>
          <tbody>
            <% @editions.each do |publication| %>
            <tr>
              <td class="icon">
                <%= image_tag "icon-#{publication.format.downcase}.png", :title => publication.format.humanize %>
              </td>
              <td class="title">
                <%= publication.admin_list_title %>

                (Ed. <%= publication.version_number %>)

                <% if publication.has_video? %>
                  <i class="icon-film" alt="Has video"></i>
                <% end %>
              </td>
              <td>
                <%= publication.state %>
              </td>
              <td>
                <% if publication.user_last_action %>
                <%= publication.user_last_action[:summary] %>
                <% end %>
              </td>
              <td>
                <%= publication.assignee %>
              </td>
            </tr>
            <% end %>
          </tbody>
        </table>
        <%= paginate @page_info %>
      </div><!--./span10 -->

    </div><!--./row-fluid -->
  </div><!--./span12 -->
</div><!--./row-fluid -->

<% content_for :page_title, "User search" %>
